"use strict";(self["webpackChunkshoppinglistmanager"]=self["webpackChunkshoppinglistmanager"]||[]).push([[572],{572:function(e,t,a){a.r(t),a.d(t,{default:function(){return U}});a(8309),a(2526),a(1817),a(9653);var n=a(6252),l=a(3577),u=(0,n.Uk)("mdi-arrow-left"),i=(0,n.Uk)(" Back "),r=(0,n._)("div",null,"Image:",-1),o=["src"],c=(0,n.Uk)("mdi-camera"),s=(0,n.Uk)(" Take Picture "),d=(0,n._)("div",null,"Id:",-1),m=(0,n._)("div",null,"Name:",-1),f=(0,n._)("div",null,"Description:",-1);function v(e,t,a,v,g,p){var w=(0,n.up)("v-icon"),b=(0,n.up)("v-btn"),k=(0,n.up)("v-col"),_=(0,n.up)("v-row"),h=(0,n.up)("v-container"),C=(0,n.up)("camera-dialog");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(b,{onClick:t[0]||(t[0]=function(t){return e.$router.go(-1)})},{default:(0,n.w5)((function(){return[(0,n.Wm)(w,null,{default:(0,n.w5)((function(){return[u]})),_:1}),i]})),_:1}),(0,n.Wm)(h,{fluid:""},{default:(0,n.w5)((function(){return[(0,n.Wm)(_,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(k,{cols:"3"},{default:(0,n.w5)((function(){return[r]})),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(_,{"no-gutters":""},{default:(0,n.w5)((function(){return[(0,n.Wm)(k,null,{default:(0,n.w5)((function(){var t;return[(0,n._)("img",{src:null===(t=e.state.basket)||void 0===t?void 0:t.image},null,8,o)]})),_:1})]})),_:1}),(0,n.Wm)(_,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(k,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(b,{onClick:e.openCamera,size:"x-small"},{default:(0,n.w5)((function(){return[(0,n.Wm)(w,null,{default:(0,n.w5)((function(){return[c]})),_:1}),s]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,n.Wm)(_,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(k,{cols:"3"},{default:(0,n.w5)((function(){return[d]})),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((function(){return[(0,n._)("div",null,(0,l.zw)(e.basketId),1)]})),_:1})]})),_:1}),(0,n.Wm)(_,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(k,{cols:"3"},{default:(0,n.w5)((function(){return[m]})),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((function(){var t;return[(0,n._)("div",null,(0,l.zw)(null===(t=e.state.basket)||void 0===t?void 0:t.name),1)]})),_:1})]})),_:1}),(0,n.Wm)(_,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(k,{cols:"3"},{default:(0,n.w5)((function(){return[f]})),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((function(){var t;return[(0,n._)("div",null,(0,l.zw)(null===(t=e.state.basket)||void 0===t?void 0:t.description),1)]})),_:1})]})),_:1})]})),_:1}),(0,n.Wm)(C,{basketId:Number(e.basketId),cameraVisible:e.state.cameraVisible,onCloseCamera:e.closeCamera},null,8,["basketId","cameraVisible","onCloseCamera"])],64)}a(9826),a(1539);var g=a(2262),p={ref:"videoRef",width:"320",style:{border:"3px dashed white"}},w=["width","height"];function b(e,t,a,l,u,i){var r=(0,n.up)("v-btn"),o=(0,n.up)("v-card-actions"),c=(0,n.up)("v-sheet"),s=(0,n.up)("v-divider"),d=(0,n.up)("v-card-text"),m=(0,n.up)("v-container"),f=(0,n.up)("v-card"),v=(0,n.up)("v-dialog");return(0,n.wg)(),(0,n.j4)(v,{modelValue:e.state.cameraVisible,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.state.cameraVisible=t}),persistent:""},{default:(0,n.w5)((function(){return[(0,n.Wm)(f,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(o,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(r,{icon:"mdi-close",size:"x-small",onClick:e.closeCamera},null,8,["onClick"])]})),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(c,null,{default:(0,n.w5)((function(){return[(0,n._)("video",p,"Video stream not available.",512)]})),_:1}),(0,n.Wm)(s),(0,n.Wm)(c,null,{default:(0,n.w5)((function(){return[(0,n._)("canvas",{ref:"canvasRef",width:e.width,height:e.height,style:{display:"none"}},null,8,w)]})),_:1})]})),_:1}),(0,n.Wm)(s),(0,n.Wm)(o,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(m,{align:"center"},{default:(0,n.w5)((function(){return[(0,n.Wm)(r,{color:"primary",icon:"mdi-camera",onClick:e.takePicture},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1}),(0,n.Wm)(s)]})),_:1},8,["modelValue"])}a(4747);var k=a(3907),_=a(9905),h=(0,n.aZ)({name:"CameraDialog",props:{cameraVisible:Boolean,basketId:Number},setup:function(e,t){var a=t.emit,l=(0,k.oR)(),u=(0,g.iH)(null),i=(0,g.iH)(null),r=320,o=0,c=!1,s=(0,g.qj)({cameraVisible:e.cameraVisible});(0,n.ic)((function(){s.cameraVisible=e.cameraVisible,s.cameraVisible&&m(u.value,i.value)}));var d=function(){if(null!==i.value&&null!==u.value){if(console.log("CameraDialog.takePicture: take a picture of the currently displayed video stream"),console.log("takePicture1 "+r+", "+o),r&&o){console.log("takePicture2 "+r+", "+o),i.value.width=r,i.value.height=o;var t=i.value.getContext("2d");if(null!==t&&(t.drawImage(u.value,0,0,r,o),e.basketId)){var a=i.value.toDataURL("image/png");l.dispatch(_.U.StoreBasketImage,{basketId:e.basketId.valueOf(),imageDataUrl:a})}}v()}else console.log("CameraDialog.takePicture: canvas, video or photo is null")},m=function(e,t){null!==e&&null!==t?(console.log("CameraDialog.startVideoCamera: Start video camera"),navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(t){null!==e&&(e.srcObject=t,e.play())})).catch((function(e){console.log("Could not access user camera: no compatible camera found or access denied. "+e)})),e.addEventListener("canplay",(function(){c||(o=e.videoHeight/(e.videoWidth/r),e.setAttribute("width",String(r)),e.setAttribute("height",String(o)),t.setAttribute("width",String(r)),t.setAttribute("height",String(o)),c=!0)}),!1)):console.log("CameraDialog.startVideoCamera: canvas or video is null")},f=function(e){if(console.log("CameraDialog.stopVideoCamera: Stop video camera"),null!==e){var t=e.srcObject;t.getTracks().forEach((function(e){e.stop()}))}},v=function(){console.log("CameraDialog.closeCamera"),f(u.value),a("close-camera")};return{state:s,canvasRef:i,videoRef:u,width:r,height:o,takePicture:d,startVideoCamera:m,stopVideoCamera:f,closeCamera:v}}}),C=a(3744);const W=(0,C.Z)(h,[["render",b]]);var V=W,I=(0,n.aZ)({name:"BasketView",components:{CameraDialog:V},props:{basketId:String},setup:function(e){var t=(0,k.oR)(),a=(0,g.qj)({basket:(0,n.Fl)((function(){return t.state.baskets.find((function(t){return t.id==e.basketId}))})),cameraVisible:!1}),l=function(){console.log("BasketView.openCamera"),a.cameraVisible=!0},u=function(){a.cameraVisible=!1};return{store:t,state:a,openCamera:l,closeCamera:u}}});const D=(0,C.Z)(I,[["render",v]]);var U=D}}]);
//# sourceMappingURL=572-legacy.52f00f2a.js.map