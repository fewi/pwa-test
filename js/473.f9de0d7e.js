"use strict";(self["webpackChunkshoppinglistmanager"]=self["webpackChunkshoppinglistmanager"]||[]).push([[473],{1473:function(e,l,a){a.r(l),a.d(l,{default:function(){return y}});var t=a(6252),s=a(3577),n=a(9963);const i=(0,t.Uk)("Load Catalog"),o=(0,t.Uk)("The catalog of articles can be loaded in the local database (indexedDB) of this device. "),u=(0,t.Uk)("Load Catalog"),r=(0,t.Uk)("Clear Catalog"),c=(0,t.Uk)("Article Search"),d=(0,t.Uk)("Search Articles");function m(e,l,a,m,g,f){const w=(0,t.up)("v-card-title"),p=(0,t.up)("v-card-subtitle"),h=(0,t.up)("v-checkbox"),v=(0,t.up)("v-spacer"),W=(0,t.up)("v-container"),_=(0,t.up)("v-btn"),C=(0,t.up)("v-card-text"),b=(0,t.up)("v-card"),k=(0,t.up)("v-text-field"),I=(0,t.up)("v-col"),U=(0,t.up)("v-row"),y=(0,t.up)("v-list-item-title"),A=(0,t.up)("v-list-item-subtitle"),Z=(0,t.up)("v-img"),x=(0,t.up)("v-list-item-header"),S=(0,t.up)("v-list-item"),D=(0,t.up)("InfiniteScroll"),N=(0,t.up)("v-list");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(W,{fluid:""},{default:(0,t.w5)((()=>[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[i])),_:1}),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[o])),_:1}),(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W,{class:"d-flex justify-start flex-wrap ml-0"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.state.catalogs,(a=>((0,t.wg)(),(0,t.j4)(h,{key:a.name,modelValue:e.state.selectedCatalogNames,"onUpdate:modelValue":l[0]||(l[0]=l=>e.state.selectedCatalogNames=l),label:`${a.name} (${a.size})`,value:`${a.name}`,class:"flex-grow-0 flex-shrink-0 pr-4"},null,8,["modelValue","label","value"])))),128)),(0,t.Wm)(v,{class:"flex-grow-1"}),(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Current number of articles on device: "+(0,s.zw)(e.state.articlesCount),1)])),_:1}),(0,t.Wm)(v,{class:"flex-grow-1"}),(0,t.Wm)(W,{fluid:""},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{disabled:!e.state.isOnline,onClick:e.loadCatalog},{default:(0,t.w5)((()=>[u])),_:1},8,["disabled","onClick"]),(0,t.Wm)(_,{onClick:e.clearCatalog},{default:(0,t.w5)((()=>[r])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[c])),_:1}),(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W,{fluid:""},{default:(0,t.w5)((()=>[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,{cols:"9"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:e.state.searchTerm,"onUpdate:modelValue":l[1]||(l[1]=l=>e.state.searchTerm=l),"hide-details":"auto",label:"Enter a search term",style:{color:"white"},onKeyup:(0,n.D2)(e.onEnter,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),(0,t.Wm)(I,{cols:"3"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{onClick:e.searchArticles},{default:(0,t.w5)((()=>[d])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Catalog Articles ("+(0,s.zw)(e.state.articles.length)+") ",1),(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(D,(0,t.dG)(e.infinitScrollProps,{onLoadMoreItems:e.loadItems}),{default:(0,t.w5)((({item:e})=>[(0,t.Wm)(S,{lines:"three"},{default:(0,t.w5)((()=>[(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.id)+" - "+(0,s.zw)(e.name),1)])),_:2},1024),(0,t.Wm)(A,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.description),1)])),_:2},1024),(0,t.Wm)(A,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{disabled:""===e.base64Image,src:`data:image/png;base64,${e.base64Image}`,style:{width:"30%"}},null,8,["disabled","src"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:1},16,["onLoadMoreItems"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,t._)("div",null,(0,s.zw)(e.state.message),1)],64)}var g=a(2262),f=a(3907),w=a(9905),p=a(6113),h=a(5293),v=a(3471);function W(e,l,a,s,n,i){const o=(0,t.Q2)("intersect");return(0,t.wg)(),(0,t.iD)(t.HY,null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.items,((l,a)=>((0,t.wg)(),(0,t.iD)("div",{key:a},[(0,t.WI)(e.$slots,"default",{item:l})])))),128)),(0,t.wy)((0,t._)("div",null,null,512),[[o,e.onIntersect]])],64)}var _=(0,t.aZ)({name:"InfiniteScroll",props:{items:Array,lastPage:Number,page:Number},setup(e,{emit:l}){(0,t.bv)((()=>{l("loadMoreItems",1)}));const a=(a,t)=>{const s=void 0!==e.page?e.page:1,n=void 0!==e.lastPage?e.lastPage:0;t[0].isIntersecting&&s<n&&l("loadMoreItems",s+1)};return{onIntersect:a}}}),C=a(3744);const b=(0,C.Z)(_,[["render",W]]);var k=b,I=(0,t.aZ)({name:"CatalogsView",components:{InfiniteScroll:k},setup(){const e=(0,f.oR)(),l=(0,g.qj)({articles:new Array,articlesCount:0,message:"",searchTerm:"",isOnline:!1,catalogs:[],selectedCatalogNames:[]}),a=(0,g.iH)({page:0,items:[],lastPage:0});v.Z.getAvailableCatalogs().then((e=>l.catalogs=e)),(0,t.bv)((()=>{s(),h.Z.registerOnlineStatusUpdateListener(s),p.Z.getLocalArticleCount().then((e=>{l.articlesCount=e})).catch((e=>{console.log(e)}))}));const s=()=>{l.isOnline=h.Z.isOnline},n=()=>{l.selectedCatalogNames.forEach((l=>e.dispatch(w.U.LoadCatalog,{catalogName:l})))},i=()=>{p.Z.clear().then((()=>{l.articles=new Array,l.articlesCount=0})).catch((e=>{console.log(e)}))},o=()=>{p.Z.searchArticlesByName(l.searchTerm).then((e=>{e.length<1&&p.Z.searchArticlesByDescription(l.searchTerm).then((e=>{l.articles=e,r(1)})).catch((e=>{console.log(e)})),l.articles=e,r(1)})).catch((e=>{console.log(e)}))},u=()=>{o()},r=e=>{const t=10;a.value.lastPage=Math.ceil(l.articles.length/t),a.value.page=e,a.value.items=l.articles.slice(0,e*t)};return{state:l,updateOnlineStatus:s,loadCatalog:n,clearCatalog:i,searchArticles:o,onEnter:u,loadItems:r,infinitScrollProps:a}}});const U=(0,C.Z)(I,[["render",m]]);var y=U}}]);
//# sourceMappingURL=473.f9de0d7e.js.map