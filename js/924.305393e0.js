"use strict";(self["webpackChunkshoppinglistmanager"]=self["webpackChunkshoppinglistmanager"]||[]).push([[924],{5924:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var l=a(6252),n=a(3577),s=a(9963);const i=(0,l.Uk)("Search Articles");function r(e,t,a,r,c,o){const u=(0,l.up)("v-card-title"),m=(0,l.up)("v-text-field"),d=(0,l.up)("v-btn"),p=(0,l.up)("v-card-text"),g=(0,l.up)("v-card"),h=(0,l.up)("v-list-item-title"),w=(0,l.up)("v-list-item-subtitle"),f=(0,l.up)("v-img"),v=(0,l.up)("v-list-item-header"),I=(0,l.up)("v-list-item"),b=(0,l.up)("InfiniteScroll"),W=(0,l.up)("v-container");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Article Search ("+(0,n.zw)(e.state.articlesCount)+")",1)])),_:1}),(0,l.Wm)(p,{class:"d-flex align-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:e.state.searchTerm,"onUpdate:modelValue":t[0]||(t[0]=t=>e.state.searchTerm=t),"hide-details":"auto",label:"Enter a search term",style:{color:"white"},onKeyup:(0,s.D2)(e.searchArticles,["enter"])},null,8,["modelValue","onKeyup"]),(0,l.Wm)(d,{class:"flex-grow-0 ml-4",onClick:e.searchArticles},{default:(0,l.w5)((()=>[i])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Found Articles ("+(0,n.zw)(e.state.articles.length)+") ",1),(0,l.Wm)(b,(0,l.dG)(e.state.pagination,{onLoadMoreItems:e.loadItems}),{default:(0,l.w5)((({item:e})=>[(0,l.Wm)(I,{lines:"three"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.id)+" - "+(0,n.zw)(e.name),1)])),_:2},1024),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.description),1)])),_:2},1024),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{disabled:""===e.base64Image,src:`data:image/png;base64,${e.base64Image}`,style:{width:"30%"}},null,8,["disabled","src"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:1},16,["onLoadMoreItems"])])),_:1})],64)}var c=a(2262),o=a(6113),u=a(5293);function m(e,t,a,n,s,i){const r=(0,l.Q2)("intersect");return(0,l.wg)(),(0,l.iD)(l.HY,null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.items,((t,a)=>((0,l.wg)(),(0,l.iD)("div",{key:a},[(0,l.WI)(e.$slots,"default",{item:t})])))),128)),(0,l.wy)((0,l._)("div",null,null,512),[[r,e.onIntersect]])],64)}var d=(0,l.aZ)({name:"InfiniteScroll",props:{items:Array,lastPage:Number,page:Number},setup(e,{emit:t}){(0,l.bv)((()=>{t("loadMoreItems",1)}));const a=(a,l)=>{const n=void 0!==e.page?e.page:1,s=void 0!==e.lastPage?e.lastPage:0;l[0].isIntersecting&&n<s&&t("loadMoreItems",n+1)};return{onIntersect:a}}}),p=a(3744);const g=(0,p.Z)(d,[["render",m]]);var h=g,w=(0,l.aZ)({name:"SearchView",components:{InfiniteScroll:h},setup(){const e=(0,c.qj)({articles:new Array,articlesCount:0,searchTerm:"",isOnline:!1,pagination:{page:0,items:[],lastPage:0}});(0,l.bv)((()=>{t(),u.Z.registerOnlineStatusUpdateListener(t),o.Z.getLocalArticleCount().then((t=>{e.articlesCount=t})).catch((e=>{console.log(e)}))}));const t=()=>{e.isOnline=u.Z.isOnline},a=()=>{o.Z.searchArticlesByName(e.searchTerm).then((t=>{t.length<1&&o.Z.searchArticlesByDescription(e.searchTerm).then((t=>{e.articles=t,n(1)})).catch((e=>{console.log(e)})),e.articles=t,n(1)})).catch((e=>{console.log(e)}))},n=t=>{const a=10;e.pagination.lastPage=Math.ceil(e.articles.length/a),e.pagination.page=t,e.pagination.items=e.articles.slice(0,t*a)};return{state:e,updateOnlineStatus:t,searchArticles:a,loadItems:n}}});const f=(0,p.Z)(w,[["render",r]]);var v=f}}]);
//# sourceMappingURL=924.305393e0.js.map